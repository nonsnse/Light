<!doctype html>
<html lang="en">
  <head>
    <script src="/assets/js/lib/eruda/eruda.js"></script>
    <script>eruda.init()</script>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="title" content="Light" />
    <meta
      name="description"
      content="A fast, simple, and highly customizable proxy."
    />
    <meta name="google-adsense-account" content="ca-pub-2804638430420139" />
    <title id="title"></title>
    <link rel="stylesheet" id="themecss" href="/assets/css/main.css" />
    <!--UV-->
    <script src="/@/bundle.js"></script>
    <script src="/@/config.js"></script>
    <!--Dynamic-->
    <script src="/dynamic/dynamic.worker.js"></script>
    <script src="/dynamic/dynamic.config.js"></script>
    <!--Preload-->
    <script src="/assets/js/preload.js"></script>
    <script>
      registerSW();
    </script>
    <!-- Google tag (gtag.js) -->
    <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=G-180MJ5GDVH"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());

      gtag("config", "G-180MJ5GDVH");
    </script>
  </head>
  <body>
    <div class="navbar">
      <div class="navbarAlign">
        <a href="/">
          <div style="min-width: 85px; max-width: 100px" class="navbarLink">
            <img style="animation: none" src="assets/imgs/home.png" />
            <p>Home</p>
          </div>
        </a>

        <a href="/g">
          <div
            style="min-width: 110px; max-width: 140px"
            class="navbarLink"
            class="navbarLink"
          >
            <img style="animation: none" src="assets/imgs/game.png" />
            <p>Games</p>
          </div>
        </a>

        <a href="/a">
          <div style="min-width: 80px; max-width: 200px" class="navbarLink">
            <img style="animation: none" src="assets/imgs/apps.png" />
            <p>Apps</p>
          </div>
        </a>

        <a href="/s">
          <div style="min-width: 105px; max-width: 200px" class="navbarLink">
            <img class="settingnav" src="assets/imgs/settings.png" />
            <p>Settings</p>
          </div>
        </a>
      </div>
    </div>
    <center>
      <h3
        style="
          margin-bottom: 30px;
          text-align: left;
          margin-left: 1%;
          margin-top: 10px;
        "
      >
        Light
        <span
          style="
            font-size: 45%;
            vertical-align: top;
            font-weight: bolder;
            color: var(--theme-color);
          "
          >V3.0.0</span
        >
      </h3>
      <div class="card" style="position: fixed">
        <div class="bg">
          <h2
            style="
              margin-bottom: 30px;
              text-align: center;
              margin-left: -1%;
              margin-top: 10px;
              color: var(--theme-color);
            "
          >
            <div id="time"></div>
          </h2>
          <div
            class="searchbar"
            style="
              position: absolute;
              left: 50%;
              top: 50%;
              transform: translate(-50%, -50%);
            "
          >
            <div class="searchbar-wrapper">
              <div class="searchbar-left">
                <div class="search-icon-wrapper">
                  <span class="search-icon searchbar-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                      <path
                        d="M15.5 14h-.79l-.28-.27A6.471 6.471 0 0 0 16 9.5 6.5 6.5 0 1 0 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"
                      ></path>
                    </svg>
                  </span>
                </div>
              </div>

              <form id="uv-form" class="searchbar-center">
                <div class="searchbar-input-spacer"></div>
                <input
                  id="uv-address"
                  type="text"
                  class="searchbar-input"
                  maxlength="2048"
                  autocapitalize="off"
                  autocomplete="off"
                  title="Search"
                  role="combobox"
                  placeholder="Search Anything"
                />
              </form>
            </div>
          </div>
          <div id="splash-text" style="margin-top: 50px; font-size: 12px">
            Loading...
          </div>
        </div>
        <div class="blob"></div>
      </div>
      <div id="suggestion-list" class="suggestion-list"></div>
    </center>

    <div hidden style="position: absolute; bottom: 22px; left: 20px">
      <label class="container" title="Click for dark/light mode">
        <input type="file" id="file-input" accept="image/*" />
        <input
          checked="checked"
          type="checkbox"
          id="backgroundToggle"
          onclick="alert('Light mode is in BETA and may not work fully.');"
        />
        <svg
          viewBox="0 0 384 512"
          height="1em"
          xmlns="http://www.w3.org/2000/svg"
          class="sun"
        >
          <path
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z"
          ></path>
        </svg>
        <svg
          viewBox="0 0 512 512"
          height="1em"
          xmlns="http://www.w3.org/2000/svg"
          class="moon"
        >
          <path
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z"
          ></path>
        </svg>
      </label>
    </div>
    <div id="background"></div>
    <div
      style="
        display: inline-flex;
        position: fixed;
        top: 97%;
        left: 50%;
        transform: translate(-50%, -50%);
      "
    >
      <a class="footer" target="_blank" href="https://status.lightgo.app"
        >Status</a
      >
      <a
        class="footer"
        style="margin-left: 10px; margin-right: 10px"
        target="_blank"
        href="https://discord.lightgo.app"
        >Discord</a
      >
      <a
        class="footer"
        target="_blank"
        href="https://github.com/nightproxy/light"
        >GitHub</a
      >
    </div>
    <script>
      function myClock() {
        setTimeout(function () {
          const d = new Date();
          const n = d.toLocaleTimeString();
          document.getElementById("time").innerHTML = n;
          myClock();
        }, 1);
      }
      myClock();
      function splash() {
        // Array of splash messages
        var splashes = [
          "Join our Discord!",
          "Fast, Simple, Easy.",
          "Made by Stella!",
          "Welcome to v2!",
          "Check out settings!",
        ];

        // Get the last displayed index from local storage, or start at 0
        var lastIndex = parseInt(localStorage.getItem("splashIndex")) || 0;

        // Calculate the next index
        var nextIndex = (lastIndex + 1) % splashes.length;

        // Display the next splash message
        document.getElementById("splash-text").textContent =
          splashes[nextIndex];

        // Update the index in local storage
        localStorage.setItem("splashIndex", nextIndex);
      }
      splash();
      const searchbar = document.getElementById("uv-address");

      const suggestionList = document.getElementById("suggestion-list");

      searchbar.addEventListener("input", async (event) => {
        const query = event.target.value.trim(); // Trim to remove leading and trailing whitespace
        if (query === "") {
          // Clear suggestion list if query is empty
          suggestionList.innerHTML = "";
          return;
        }

        const response = await fetch(`/search=${query}`).then((res) =>
          res.json()
        );
        const suggestions = response.map((item) => item.phrase);

        // Clear previous suggestions
        suggestionList.innerHTML = "";

        // Populate the suggestion list
        suggestions.forEach((suggestion) => {
          const listItem = document.createElement("div");
          listItem.textContent = suggestion;
          listItem.addEventListener("click", () => {
            searchbar.value = suggestion;
            form.dispatchEvent(new Event("submit"));
          });
          suggestionList.appendChild(listItem);
        });
      });

      // Clear suggestion list when search bar is emptied via backspace
      searchbar.addEventListener("keydown", (event) => {
        if (event.key === "Backspace" && searchbar.value === "") {
          suggestionList.innerHTML = "";
        }
      });

      let selectedSuggestionIndex = -1;

      searchbar.addEventListener("keydown", (event) => {
        const suggestionItems = suggestionList.querySelectorAll("div");
        const numSuggestions = suggestionItems.length;

        if (event.key === "ArrowDown") {
          event.preventDefault();
          selectedSuggestionIndex =
            (selectedSuggestionIndex + 1) % numSuggestions;
          updateSelectedSuggestion();
        } else if (event.key === "ArrowUp") {
          event.preventDefault();
          selectedSuggestionIndex =
            (selectedSuggestionIndex - 1 + numSuggestions) % numSuggestions;
          updateSelectedSuggestion();
        } else if (event.key === "Tab") {
          if (selectedSuggestionIndex !== -1) {
            event.preventDefault();
            const selectedSuggestion =
              suggestionItems[selectedSuggestionIndex].textContent;
            searchbar.value = selectedSuggestion;
          }
        }
      });

      function updateSelectedSuggestion() {
        const suggestionItems = suggestionList.querySelectorAll("div");
        suggestionItems.forEach((item, index) => {
          if (index === selectedSuggestionIndex) {
            item.classList.add("selected");
          } else {
            item.classList.remove("selected");
          }
        });
      }
    </script>
  </body>
  <!--Main Scripts-->
  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/lib/rh/rammerhead.js"></script>
  <script src="/assets/js/index.js"></script>
  <script>
    let CLF_config = {
      app_id: "23e8c853-542e-4413-acee-abfe3f85aa5e",
      data: {
        user_id: "123456", // required
        user_email: "user@email.com", // required
        user_name: "User Name", // optional
        custom_data: {
          JobRole: "CEO", // optional
          Plan: "Pro", // optional
          teamMates: "4", // optional
          MonthlySpend: "50 USD", // optional
        },
      },
    };
  </script>
  <script async src="https://widget.changelogfy.com/index.js"></script>
</html>
